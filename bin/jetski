#!/usr/bin/env ruby

require 'optparse'
require 'jetski'
require 'thor'

class JetskiCLI < Thor
  include Thor::Actions
  desc "new APP_NAME", "Create a new Jetski app"
  def new(name)
    return say "There is already a folder named #{name} in this directory." if File.exist?(name)
    FileUtils.mkdir_p(name)
    say "Creating #{name} app with Jetski!"
    directory "base", "#{name}"
    run "cd #{name} && bundle install"
    say "Your app #{name} has been generated!"
    say "Start you're app fast with this command"
    say "cd #{name} && ruby ./start.rb"
  end

  def self.source_root
    File.join(File.dirname(__FILE__), '..', 'templates')
  end
end

JetskiCLI.start(ARGV)